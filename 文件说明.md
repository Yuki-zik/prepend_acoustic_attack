项目中主要代码文件及依赖关系（中文摘要）：  

- `train_attack.py`：训练对抗前置音频段的入口脚本；依赖 `src/tools/args.py`（参数）、`src/data/load_data.py`（数据）、`src/models/load_model.py`（模型）、`src/attacker/selector.py`（选择攻击器）、`src/tools/saving.py`（路径生成）。  
- `eval_attack.py`：评估已训练攻击的入口；同上依赖参数/数据/模型/攻击器，并额外读取训练产出的模型目录。  
- `process.py`：从 `AudioAttackModelWrapper` 中导出对抗段并保存为 `.npy`；依赖 `torch` 与 `src/attacker/audio_raw/audio_attack_model_wrapper.py`。  
- `analysis.py`：多种分析开关（显著性、WER 对比、谱图可视化等）；依赖 `core/attack/analysis` 参数、`load_model`、`load_data`、`select_eval_attacker`、`src/tools/analysis_tools.py`、`src/tools/saving.py`。  

`src/tools/`：  
- `args.py`：集中定义核心/攻击/分析参数解析；被训练、评估、分析脚本调用。  
- `tools.py`：通用工具与指标（WER、BLEU、COMET、语言概率等）以及随机种子/设备管理；被攻击器和分析脚本复用。  
- `saving.py`：生成实验输出目录的工具；被训练、评估、分析脚本使用。  
- `analysis_tools.py`：显著性计算、投影矩阵相似度等分析函数；主要由 `analysis.py` 使用。  
- `calc_wer.py`、`calc_wer.sh`：将预测与参考转换为 `sclite` 可读格式并计算 WER；脚本互相配合。  

`src/models/`：  
- `load_model.py`：根据参数返回 Whisper 单模型/集成或 Canary；被主脚本和攻击器调用。  
- `whisper.py`：对 Whisper 的轻量封装，提供加载与预测；依赖 `whisper` 官方库。  
- `canary.py`：封装 Nemo Canary，多任务/语言配置及清单生成；供 `load_model.py` 和攻击器使用。  

`src/data/`：  
- `load_data.py`：统一的数据入口，按数据集名称派发；依赖各数据集加载函数。  
- `speech.py`：LibriSpeech/TedLium/MGB/ARTIE 等语音数据的本地列表解析。  
- `fleurs.py`：从 HuggingFace Datasets 加载 FLEURS，支持平行语料与缓存预测；依赖 `src/models/whisper.py` 与 `src/models/canary.py` 生成转写/翻译。  

`src/attacker/`：  
- `selector.py`：根据配置选择训练/评估阶段的攻击器实现。  
- `mel/soft_prompt_attack.py`、`mel/base.py`、`mel/softprompt_model_wrapper.py`：在 mel 频谱空间的软提示攻击流程；依赖 Whisper tokenizer 和解码器。  
- `audio_raw/base.py`、`audio_raw/learn_attack.py`、`audio_raw/learn_attack_hallucinate.py`、`audio_raw/learn_attack_translate.py`：在原始音频空间的不同攻击目标（静音、幻觉、翻译强制）；依赖 `AudioAttackModelWrapper` 或 Canary 版本。  
- `audio_raw/audio_attack_model_wrapper.py`、`audio_raw/audio_attack_canary_model_wrapper.py`：在波形前插入可学习对抗段并调用 Whisper/Canary 前向；被上述攻击器和导出脚本使用。  
